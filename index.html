<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STREAM ENAK</title>




<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body{
  background:linear-gradient(135deg,#1a1a2e,#16213e);
  color:white;
  font-family:Poppins,sans-serif;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

header{
  background:rgba(0,0,0,.3);
  backdrop-filter:blur(15px);
}

.video-container{
  max-width:900px;
  margin:20px auto;
  border-radius:20px;
  overflow:hidden;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
}

.video-landscape{
  aspect-ratio:16/9;
  width:100%;
}

.video-portrait{
  aspect-ratio:9/16;
  max-width:420px;
  width:100%;
}

#video-player{
  width:100%;
  height:100%;
  object-fit:contain;
}

#playlist{
  max-height:400px;
  overflow-y:auto;
}

.playlist-item{
  padding:12px;
  border-radius:12px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:8px;
}

.playlist-item:hover{
  background:rgba(255,255,255,.1);
}

.playlist-active{
  background:rgba(59,130,246,.2);
  color:#60a5fa;
  font-weight:600;
}

footer{
  text-align:center;
  padding:20px;
  margin-top:auto;
  background:rgba(0,0,0,.2);
}
</style>
</head>

<body>

<header class="py-4 px-6 flex justify-between items-center sticky top-0 z-50">
  <h1 class="text-2xl font-bold text-blue-400">ðŸŽ¬ STREAM <span class="text-white">ENAK</span></h1>
  <a href="https://videi.my.id/" class="bg-blue-600 px-5 py-2 rounded-full">Upload</a>
</header>

<main class="flex-grow px-4 pb-10">

<!-- VIDEO -->
<div id="video-frame" class="video-container video-landscape">
  <video id="video-player" controls controlsList="nodownload" disablePictureInPicture></video>
</div>

<!-- PLAYLIST -->
<section class="max-w-3xl mx-auto mt-10 bg-white/5 rounded-3xl p-6">
  <h3 class="text-xl font-bold mb-4">
    <i class="fas fa-play-circle text-blue-500 mr-2"></i> Playlist
  </h3>
  <div id="playlist"></div>
</section>

</main>

<footer>
Â© 2026 Stream Enak
</footer>

<script>
document.addEventListener("DOMContentLoaded", async () => {

const jsonUrl = "https://raw.githubusercontent.com/liwa22/json/main/Video.json?cb="+Date.now();
const player = document.getElementById("video-player");
const frame = document.getElementById("video-frame");
const playlist = document.getElementById("playlist");

let videos = [];
let currentId = "";

const res = await axios.get(jsonUrl);

// ðŸ”¥ BALIK URUTAN (TERBARU DI ATAS)
videos = res.data.reverse();

function renderPlaylist(active){
  playlist.innerHTML="";
  videos.forEach(v=>{
    const el=document.createElement("div");
    el.className="playlist-item"+(v.id===active?" playlist-active":"");
    el.innerHTML=`<i class="fas fa-play-circle"></i><span>${v.Judul}</span>`;
    el.onclick=()=>loadVideo(v);
    playlist.appendChild(el);
  });
}

function loadVideo(v){
  currentId=v.id;
  player.src=v.Url;
  player.poster=v.Thumbnail||"";
  history.pushState({id:v.id},"","/e/"+v.id);
  renderPlaylist(v.id);
  window.scrollTo({top:0,behavior:"smooth"});
}

// ðŸ“ AUTO DETECT LANDSCAPE / PORTRAIT
player.addEventListener("loadedmetadata",()=>{
  const w=player.videoWidth;
  const h=player.videoHeight;

  frame.classList.remove("video-landscape","video-portrait");

  if(h>w){
    frame.classList.add("video-portrait");
  }else{
    frame.classList.add("video-landscape");
  }
});

const path=location.pathname.replace(/^\/|\/$/g,"");
currentId=path.startsWith("e/")?path.slice(2):path;

loadVideo(videos.find(v=>v.id===currentId)||videos[0]);

window.addEventListener("popstate",e=>{
  const v=videos.find(x=>x.id===e.state?.id);
  if(v)loadVideo(v);
});

});
</script>

</body>
</html>
